{"ast":null,"code":"import _objectSpread from\"D:/vendas/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from'react';import{initializeApp}from'firebase/app';import{getAuth,onAuthStateChanged,createUserWithEmailAndPassword,signInWithEmailAndPassword,signOut}from'firebase/auth';import{getFirestore,collection,addDoc,query,orderBy,onSnapshot,Timestamp,deleteDoc,doc}from'firebase/firestore';import{AreaChart,Area,XAxis,YAxis,CartesianGrid,Tooltip,Legend,ResponsiveContainer,LabelList}from'recharts';// SmartFix Component for notifications\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const SmartFix=_ref=>{let{message,type,onClose}=_ref;const[isVisible,setIsVisible]=useState(false);const timeoutRef=useRef(null);useEffect(()=>{if(message){setIsVisible(true);if(timeoutRef.current){clearTimeout(timeoutRef.current);}timeoutRef.current=setTimeout(()=>{setIsVisible(false);onClose();},5000);}else{setIsVisible(false);}return()=>{if(timeoutRef.current){clearTimeout(timeoutRef.current);}};},[message,onClose]);if(!isVisible||!message)return null;let bgColorClass='';let borderColorClass='';let textColorClass='';switch(type){case'info':bgColorClass='bg-blue-100';borderColorClass='border-blue-400';textColorClass='text-blue-700';break;case'success':bgColorClass='bg-green-100';borderColorClass='border-green-400';textColorClass='text-green-700';break;case'error':bgColorClass='bg-red-100';borderColorClass='border-red-400';textColorClass='text-red-700';break;case'warning':bgColorClass='bg-yellow-100';borderColorClass='border-yellow-400';textColorClass='text-yellow-800';break;default:bgColorClass='bg-gray-100';borderColorClass='border-gray-400';textColorClass='text-gray-700';}return/*#__PURE__*/_jsxs(\"div\",{className:\"fixed top-4 right-4 p-4 rounded-lg shadow-lg flex items-center justify-between z-50 transition-all duration-500 transform \".concat(bgColorClass,\" \").concat(borderColorClass,\" \").concat(textColorClass,\" \").concat(isVisible?'translate-x-0 opacity-100':'translate-x-full opacity-0'),role:\"alert\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"block sm:inline\",children:message}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsVisible(false),className:\"ml-4 text-current opacity-75 hover:opacity-100 focus:outline-none\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-4 w-4\",role:\"button\",xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 20 20\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\",clipRule:\"evenodd\"})})})]});};// Componente da Janela Flutuante para Adicionar Venda Rápida\nconst FloatingSaleModal=_ref2=>{let{isOpen,onClose,onQuickAddSale,loading,showSmartFix}=_ref2;const[amount,setAmount]=useState('');const inputRef=useRef(null);useEffect(()=>{if(isOpen&&inputRef.current){inputRef.current.focus();}},[isOpen]);const handleAdd=async()=>{if(amount===''||isNaN(parseFloat(amount))){showSmartFix('Por favor, insira um valor válido.','warning');return;}await onQuickAddSale(parseFloat(amount));setAmount('');// Limpa o campo após adicionar\nonClose();// Fecha o modal\n};if(!isOpen)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-40 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-xl shadow-2xl w-full max-w-sm\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-purple-700 mb-4 text-center\",children:\"Adicionar Venda R\\xE1pida\"}),/*#__PURE__*/_jsx(\"input\",{ref:inputRef,type:\"number\",step:\"0.01\",className:\"w-full p-3 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-lg shadow-sm mb-4\",placeholder:\"Valor da Venda (hoje)\",value:amount,onChange:e=>setAmount(e.target.value),onKeyPress:e=>{if(e.key==='Enter'){handleAdd();}}}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAdd,className:\"w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 active:scale-95 flex items-center justify-center text-lg mb-3\",disabled:loading,children:loading?'Adicionando...':'Adicionar Venda'}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"w-full text-gray-600 hover:text-gray-800 font-semibold py-2 px-4 rounded-lg transition duration-200\",children:\"Fechar\"})]})});};function App(){const[db,setDb]=useState(null);const[userId,setUserId]=useState(null);const[sales,setSales]=useState([]);const[newSaleAmount,setNewSaleAmount]=useState('');const[loading,setLoading]=useState(true);// SmartFix state\nconst[smartFixMessage,setSmartFixMessage]=useState('');const[smartFixType,setSmartFixType]=useState('info');// New state variables for navigation and adding past sales\nconst[viewMode,setViewMode]=useState('daily');const[displayDate,setDisplayDate]=useState(new Date());const[displayMonth,setDisplayMonth]=useState(new Date().getMonth());const[displayYear,setDisplayYear]=useState(new Date().getFullYear());const[selectedSaleDate,setSelectedSaleDate]=useState(new Date().toISOString().split('T')[0]);const saleInputRef=useRef(null);// PWA related state for \"Add to Home Screen\" prompt\nconst[deferredPrompt,setDeferredPrompt]=useState(null);const[showInstallMessage,setShowInstallMessage]=useState(false);// Auth states for email/password\nconst[email,setEmail]=useState('');const[password,setPassword]=useState('');const[isRegistering,setIsRegistering]=useState(false);const[authInstance,setAuthInstance]=useState(null);// Estado para controlar a visibilidade da janela flutuante\nconst[showFloatingSaleModal,setShowFloatingSaleModal]=useState(false);// Helper function to get the week number (ISO week date standard)\nfunction getWeekNumber(d){d=new Date(Date.UTC(d.getFullYear(),d.getMonth(),d.getDate()));d.setUTCDate(d.getUTCDate()+4-(d.getUTCDay()||7));const yearStart=new Date(Date.UTC(d.getUTCFullYear(),0,1));const weekNo=Math.ceil(((d-yearStart)/86400000+1)/7);return weekNo;}// Helper function to get the start of the week (Sunday)\nconst getStartOfWeek=date=>{const d=new Date(date);const day=d.getDay();const diff=d.getDate()-day;return new Date(d.getFullYear(),d.getMonth(),diff,0,0,0,0);};// Helper function to get the end of the week (Saturday)\nconst getEndOfWeek=date=>{const d=new Date(date);const day=d.getDay();const diff=d.getDate()+(6-day);return new Date(d.getFullYear(),d.getMonth(),diff,23,59,59,999);};// Function to show SmartFix message\nconst showSmartFix=function(msg){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'info';setSmartFixMessage(msg);setSmartFixType(type);};// Initialize Firebase and set up authentication\nuseEffect(()=>{let unsubscribeAuthListener=()=>{};const initializeFirebase=async()=>{try{const firebaseConfig={apiKey:\"AIzaSyCYW9S1e3oMczYb96dPpGeEib71wG-mBVQ\",authDomain:\"vendas-da-loja.firebaseapp.com\",projectId:\"vendas-da-loja\",storageBucket:\"vendas-da-loja.firebasestorage.app\",messagingSenderId:\"88597692449\",appId:\"1:88597692449:web:1ba73a30e0f681ee196360\",measurementId:\"G-BWML378TW4\"};const app=initializeApp(firebaseConfig);const firestore=getFirestore(app);const firebaseAuth=getAuth(app);setAuthInstance(firebaseAuth);// Armazena a instância de autenticação\nsetDb(firestore);unsubscribeAuthListener=onAuthStateChanged(firebaseAuth,user=>{if(user){setUserId(user.uid);// Melhoria: Mostrar email do utilizador se disponível\nshowSmartFix(\"Bem-vindo, utilizador \".concat(user.email||user.uid.substring(0,8),\"...\"),'info');setLoading(false);}else{// Quando o utilizador não está logado (após logout ou primeira visita)\n// Não faz login anónimo automático aqui.\nsetUserId(null);// Garante que userId é null\nsetLoading(false);showSmartFix(\"Por favor, faça login ou registe-se para aceder aos seus dados.\",'info');}});}catch(err){console.error(\"Erro ao inicializar Firebase:\",err);showSmartFix(\"Erro ao carregar a aplicação. Verifique a sua configuração do Firebase.\",'error');setLoading(false);}};initializeFirebase();return()=>{unsubscribeAuthListener();};},[]);// Fetch sales data when userId and db are available\nuseEffect(()=>{let unsubscribeSalesListener;// Declare local variable for this useEffect\nif(db&&userId){// Apenas tenta buscar dados se db e userId estiverem prontos\nsetSmartFixMessage('');try{const appIdForCollection='app-id-vendas';const salesCollectionRef=collection(db,\"artifacts/\".concat(appIdForCollection,\"/users/\").concat(userId,\"/dailySales\"));const q=query(salesCollectionRef,orderBy('timestamp','asc'));unsubscribeSalesListener=onSnapshot(q,snapshot=>{const salesData=snapshot.docs.map(doc=>_objectSpread({id:doc.id},doc.data()));setSales(salesData);},err=>{console.error(\"Erro ao carregar vendas:\",err);showSmartFix(\"Não foi possível carregar as vendas. Tente recarregar a página.\",'error');});return()=>{if(unsubscribeSalesListener){unsubscribeSalesListener();}};}catch(err){console.error(\"Erro ao configurar listener de vendas:\",err);showSmartFix(\"Erro ao aceder dados de vendas.\",'error');}}else{// Se userId ou db não estiverem prontos, limpa as vendas para evitar mostrar dados antigos\nsetSales([]);}return()=>{if(unsubscribeSalesListener){unsubscribeSalesListener();}};},[db,userId]);// PWA: Listen for beforeinstallprompt event\nuseEffect(()=>{const handleBeforeInstallPrompt=e=>{e.preventDefault();setDeferredPrompt(e);setShowInstallMessage(true);console.log('beforeinstallprompt event fired');};window.addEventListener('beforeinstallprompt',handleBeforeInstallPrompt);return()=>{window.removeEventListener('beforeinstallprompt',handleBeforeInstallPrompt);};},[]);// PWA: Handle install click\nconst handleInstallClick=async()=>{if(!deferredPrompt){showSmartFix(\"Para instalar a aplicação, use o menu 'Partilhar' do seu navegador e selecione 'Adicionar ao Ecrã Principal'.\",'info');return;}deferredPrompt.prompt();const{outcome}=await deferredPrompt.userChoice;console.log(\"Resposta do utilizador ao prompt de instala\\xE7\\xE3o: \".concat(outcome));setDeferredPrompt(null);setShowInstallMessage(false);if(outcome==='accepted'){showSmartFix('Aplicação instalada com sucesso!','success');}else{showSmartFix('Instalação cancelada.','info');}};// Funções de Autenticação por Email/Password\nconst handleEmailSignUp=async()=>{if(!email||!password){showSmartFix('Por favor, preencha o email e a palavra-passe.','warning');return;}// Validação de palavra-passe no lado do cliente\nif(password.length<6){showSmartFix('A palavra-passe deve ter pelo menos 6 caracteres.','warning');return;}if(!authInstance){showSmartFix('Serviço de autenticação não disponível.','error');return;}setLoading(true);try{await createUserWithEmailAndPassword(authInstance,email,password);showSmartFix('Registo bem-sucedido! Pode agora iniciar sessão.','success');setEmail('');setPassword('');setIsRegistering(false);// Volta para o formulário de login\n}catch(error){console.error(\"Erro no registo:\",error);// Mensagem de erro mais amigável para palavras-passe fracas\nif(error.code==='auth/weak-password'){showSmartFix('A palavra-passe é muito fraca. Por favor, use uma palavra-passe mais forte (pelo menos 6 caracteres).','error');}else if(error.code==='auth/email-already-in-use'){showSmartFix('Este email já está em uso. Tente iniciar sessão ou use outro email.','warning');}else{showSmartFix(\"Erro no registo: \".concat(error.message),'error');}}finally{setLoading(false);}};const handleEmailSignIn=async()=>{if(!email||!password){showSmartFix('Por favor, preencha o email e a palavra-passe.','warning');return;}if(!authInstance){showSmartFix('Serviço de autenticação não disponível.','error');return;}setLoading(true);try{await signInWithEmailAndPassword(authInstance,email,password);showSmartFix('Sessão iniciada com sucesso!','success');setEmail('');setPassword('');}catch(error){console.error(\"Erro no login:\",error);// Mensagens de erro mais amigáveis para login\nif(error.code==='auth/invalid-email'||error.code==='auth/user-not-found'){showSmartFix('Email inválido ou utilizador não encontrado.','error');}else if(error.code==='auth/wrong-password'){showSmartFix('Palavra-passe incorreta.','error');}else{showSmartFix(\"Erro no login: \".concat(error.message),'error');}}finally{setLoading(false);}};const handleSignOut=async()=>{if(!authInstance)return;setLoading(true);try{await signOut(authInstance);setUserId(null);// Limpa o userId ao fazer logout\nsetSales([]);// Limpa os dados de vendas\nshowSmartFix('Sessão terminada com sucesso.','info');}catch(error){console.error(\"Erro ao terminar sessão:\",error);showSmartFix(\"Erro ao terminar sess\\xE3o: \".concat(error.message),'error');}finally{setLoading(false);}};// Function to add a new sale (from main form)\nconst handleAddSale=async()=>{if(!userId){// Verifica se há um usuário autenticado antes de adicionar venda\nshowSmartFix('Por favor, inicie sessão para adicionar vendas.','warning');return;}if(newSaleAmount===''||isNaN(parseFloat(newSaleAmount))){showSmartFix('Por favor, insira um valor de venda válido.','warning');return;}if(!db){showSmartFix('Aplicação não pronta. Tente novamente.','error');return;}setLoading(true);setSmartFixMessage('');try{const amount=parseFloat(newSaleAmount);const saleDateTime=new Date(selectedSaleDate+'T12:00:00');const appIdForCollection='app-id-vendas';const salesCollectionRef=collection(db,\"artifacts/\".concat(appIdForCollection,\"/users/\").concat(userId,\"/dailySales\"));await addDoc(salesCollectionRef,{amount:amount,timestamp:Timestamp.fromDate(saleDateTime),date:selectedSaleDate});setNewSaleAmount('');setDisplayDate(new Date(selectedSaleDate));setDisplayMonth(new Date(selectedSaleDate).getMonth());setDisplayYear(new Date(selectedSaleDate).getFullYear());setViewMode('daily');setSelectedSaleDate(new Date().toISOString().split('T')[0]);showSmartFix('Venda adicionada com sucesso!','success');if(saleInputRef.current){saleInputRef.current.focus();}}catch(e){console.error(\"Erro ao adicionar documento: \",e);showSmartFix(\"Erro ao adicionar venda. Por favor, tente novamente.\",'error');}finally{setLoading(false);}};// Nova função para adicionar venda rápida (do modal)\nconst handleQuickAddSale=async amount=>{if(!userId){showSmartFix('Por favor, inicie sessão para adicionar vendas.','warning');return;}if(!db){showSmartFix('Aplicação não pronta. Tente novamente.','error');return;}setLoading(true);setSmartFixMessage('');try{const saleDateTime=new Date();// Data de hoje\nconst todayDateString=saleDateTime.toISOString().split('T')[0];const appIdForCollection='app-id-vendas';const salesCollectionRef=collection(db,\"artifacts/\".concat(appIdForCollection,\"/users/\").concat(userId,\"/dailySales\"));await addDoc(salesCollectionRef,{amount:amount,timestamp:Timestamp.fromDate(saleDateTime),date:todayDateString});showSmartFix('Venda rápida adicionada com sucesso!','success');// Atualiza a visualização para o dia de hoje se a venda foi para hoje\nsetDisplayDate(new Date());setDisplayMonth(new Date().getMonth());setDisplayYear(new Date().getFullYear());setViewMode('daily');}catch(e){console.error(\"Erro ao adicionar documento rápido: \",e);showSmartFix(\"Erro ao adicionar venda rápida. Por favor, tente novamente.\",'error');}finally{setLoading(false);}};// Função para apagar uma venda\nconst handleDeleteSale=async saleId=>{if(!db||!userId){showSmartFix('Aplicação não pronta ou utilizador não autenticado.','error');return;}if(!window.confirm('Tem certeza que deseja apagar esta venda?')){// Confirmação antes de apagar\nreturn;}setLoading(true);setSmartFixMessage('');try{const appIdForCollection='app-id-vendas';const saleDocRef=doc(db,\"artifacts/\".concat(appIdForCollection,\"/users/\").concat(userId,\"/dailySales\"),saleId);await deleteDoc(saleDocRef);showSmartFix('Venda apagada com sucesso!','success');}catch(e){console.error(\"Erro ao apagar documento: \",e);showSmartFix(\"Erro ao apagar venda. Por favor, tente novamente.\",'error');}finally{setLoading(false);}};// Helper function to format currency\nconst formatCurrency=amount=>{return new Intl.NumberFormat('pt-BR',{style:'currency',currency:'BRL'}).format(amount);};// Filter sales based on view mode and navigation\nconst getFilteredSales=()=>{return sales.filter(sale=>{const saleDate=sale.timestamp?new Date(sale.timestamp.toDate()):new Date(sale.date);saleDate.setHours(0,0,0,0);switch(viewMode){case'daily':const currentDayString=new Date(displayDate).toISOString().split('T')[0];return sale.date===currentDayString;case'weekly':const startOfWeek=getStartOfWeek(displayDate);const endOfWeek=getEndOfWeek(displayDate);return saleDate>=startOfWeek&&saleDate<=endOfWeek;case'monthly':return saleDate.getMonth()===displayMonth&&saleDate.getFullYear()===displayYear;case'yearly':return saleDate.getFullYear()===displayYear;default:return true;}});};const filteredSales=getFilteredSales();const currentPeriodTotal=filteredSales.reduce((sum,sale)=>sum+sale.amount,0);// Prepare data for the chart based on viewMode\nconst getChartData=()=>{const aggregatedData={};filteredSales.forEach(sale=>{const saleDate=sale.timestamp?new Date(sale.timestamp.toDate()):new Date(sale.date);let key;let label;switch(viewMode){case'daily':key=sale.date;label=new Date(sale.date).toLocaleDateString('pt-BR',{day:'2-digit',month:'short'});break;case'weekly':const weekNumber=getWeekNumber(saleDate);key=\"\".concat(saleDate.getFullYear(),\"-W\").concat(weekNumber);label=\"Semana \".concat(weekNumber);break;case'monthly':const monthWeekNumber=getWeekNumber(saleDate);const startOfPeriodWeek=getStartOfWeek(saleDate);const endOfPeriodWeek=getEndOfWeek(saleDate);const monthStart=new Date(displayYear,displayMonth,1);const monthEnd=new Date(displayYear,displayMonth+1,0,23,59,59,999);let displayStart=startOfPeriodWeek;let displayEnd=endOfPeriodWeek;if(startOfPeriodWeek<monthStart){displayStart=monthStart;}if(endOfPeriodWeek>monthEnd){displayEnd=monthEnd;}key=\"\".concat(saleDate.getFullYear(),\"-\").concat(saleDate.getMonth()+1,\"-W\").concat(monthWeekNumber);label=\"\".concat(displayStart.toLocaleDateString('pt-BR',{day:'2-digit'}),\" - \").concat(displayEnd.toLocaleDateString('pt-BR',{day:'2-digit'}));break;case'yearly':const month=saleDate.getMonth();const year=saleDate.getFullYear();key=\"\".concat(year,\"-\").concat(month);label=new Date(year,month,1).toLocaleDateString('pt-BR',{month:'long'});break;default:key=sale.date;label=sale.date;}if(aggregatedData[key]){aggregatedData[key].total+=sale.amount;}else{aggregatedData[key]={key:key,label:label,total:sale.amount,date:saleDate};}});const data=Object.values(aggregatedData).sort((a,b)=>{if(a.date&&b.date){return a.date-b.date;}return a.key.localeCompare(b.key);});return data;};const chartData=getChartData();// Custom Label component for the AreaChart peaks\nconst CustomLabel=props=>{const{x,y,value}=props;if(value>0){return/*#__PURE__*/_jsx(\"text\",{x:x,y:y,dy:-8,fill:\"#20B2AA\",fontSize:12,textAnchor:\"middle\",fontWeight:\"bold\",children:formatCurrency(value)});}return null;};// Handle navigation for different periods\nconst handleNavigate=direction=>{let newDate=new Date(displayDate);let newMonth=displayMonth;let newYear=displayYear;switch(viewMode){case'daily':newDate.setDate(displayDate.getDate()+direction);setDisplayDate(newDate);break;case'weekly':newDate.setDate(displayDate.getDate()+direction*7);setDisplayDate(newDate);break;case'monthly':newMonth+=direction;if(newMonth>11){newMonth=0;newYear++;}else if(newMonth<0){newMonth=11;newYear--;}setDisplayMonth(newMonth);setDisplayYear(newYear);setDisplayDate(new Date(newYear,newMonth,1));break;case'yearly':newYear+=direction;setDisplayYear(newYear);setDisplayDate(new Date(newYear,0,1));break;default:break;}};// Format the period string for display\nconst formatDisplayPeriod=()=>{const options={year:'numeric',month:'long',day:'numeric'};const date=new Date(displayDate);date.setFullYear(displayYear,displayMonth,1);switch(viewMode){case'daily':return\"Dia: \".concat(new Date(displayDate).toLocaleDateString('pt-BR',options));case'weekly':const startOfWeek=getStartOfWeek(displayDate).toLocaleDateString('pt-BR');const endOfWeek=getEndOfWeek(displayDate).toLocaleDateString('pt-BR');return\"Semana: \".concat(startOfWeek,\" - \").concat(endOfWeek,\" (Semana \").concat(getWeekNumber(displayDate),\")\");case'monthly':return\"M\\xEAs: \".concat(new Date(displayYear,displayMonth,1).toLocaleDateString('pt-BR',{year:'numeric',month:'long'}));case'yearly':return\"Ano: \".concat(displayYear);default:return'';}};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center p-4 font-sans text-gray-800\",children:[/*#__PURE__*/_jsx(SmartFix,{message:smartFixMessage,type:smartFixType,onClose:()=>setSmartFixMessage('')}),/*#__PURE__*/_jsx(FloatingSaleModal,{isOpen:showFloatingSaleModal,onClose:()=>setShowFloatingSaleModal(false),onQuickAddSale:handleQuickAddSale,loading:loading,showSmartFix:showSmartFix}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-xl shadow-2xl w-full max-w-4xl backdrop-filter backdrop-blur-sm bg-opacity-90 border border-purple-300\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-extrabold text-center text-purple-800 mb-8 tracking-tight\",children:\"\\uD83D\\uDCB8 Minhas Vendas \\uD83D\\uDCB8\"}),loading?/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center items-center h-32\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-16 w-16 border-b-4 border-purple-500\"}),/*#__PURE__*/_jsx(\"p\",{className:\"ml-4 text-purple-700 text-lg\",children:\"A carregar dados...\"})]}):/*#__PURE__*/_jsx(_Fragment,{children:!userId?/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8 p-6 bg-purple-50 rounded-lg shadow-inner border border-purple-200\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-purple-700 mb-4 text-center\",children:isRegistering?'Registar':'Iniciar Sessão'}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-4 mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"p-3 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-lg shadow-sm\",placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"p-3 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-lg shadow-sm\",placeholder:\"Palavra-passe\",value:password,onChange:e=>setPassword(e.target.value)})]}),/*#__PURE__*/_jsx(\"button\",{onClick:isRegistering?handleEmailSignUp:handleEmailSignIn,className:\"w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 active:scale-95 flex items-center justify-center text-lg mb-4\",children:isRegistering?'Registar':'Iniciar Sessão'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsRegistering(!isRegistering),className:\"w-full text-purple-600 hover:text-purple-800 font-semibold py-2 px-4 rounded-lg transition duration-200\",children:isRegistering?'Já tem conta? Inicie sessão':'Não tem conta? Registe-se'}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center text-sm text-gray-500 mt-4\",children:[\"O seu ID de Utilizador atual (an\\xF3nimo): \",userId||'A carregar...']})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[showInstallMessage&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-100 border border-yellow-400 text-yellow-800 px-4 py-3 rounded relative mb-4 flex items-center justify-between\",role:\"alert\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Quer instalar esta aplica\\xE7\\xE3o para acesso r\\xE1pido?\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleInstallClick,className:\"ml-4 bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 active:scale-95\",children:\"Instalar Aplica\\xE7\\xE3o\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8 p-6 bg-purple-50 rounded-lg shadow-inner border border-purple-200\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold text-purple-700 mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6 mr-2 text-purple-600\",fill:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.592 1M12 8V7m0 1v8m0 4v1m-6-10H4m4-2H6m7 0h4m-4 2h2M6 20H4m2-2h2m0-6h2m-2 4h2m-2-6h-2m2 0H8m6 0h2m-2 2h2m-2 0H8\"})}),\"Registar Nova Venda\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row gap-4 mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{ref:saleInputRef,type:\"number\",step:\"0.01\",className:\"flex-grow p-3 border border-purple-300 rounded-lg focus:ring-2 focus:ring-500 focus:border-transparent text-lg shadow-sm\",placeholder:\"Ex: 50.75\",value:newSaleAmount,onChange:e=>setNewSaleAmount(e.target.value),onKeyPress:e=>{if(e.key==='Enter'){handleAddSale();}}}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"p-3 border border-purple-300 rounded-lg focus:ring-2 focus:ring-500 focus:border-transparent text-lg shadow-sm\",value:selectedSaleDate,onChange:e=>setSelectedSaleDate(e.target.value)})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleAddSale,className:\"w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 active:scale-95 flex items-center justify-center text-lg\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 mr-2\",fill:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z\"})}),\"Adicionar Venda\"]})]}),userId&&/*#__PURE__*/// Só mostra o botão se o utilizador estiver logado\n_jsx(\"div\",{className:\"mb-8 text-center\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowFloatingSaleModal(true),className:\"bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 active:scale-95 flex items-center justify-center text-lg mx-auto\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6 mr-2\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z\",clipRule:\"evenodd\"})}),\"Adicionar Venda R\\xE1pida\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 flex justify-center space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setViewMode('daily');setDisplayDate(new Date());// Redefine para hoje\n},className:\"py-2 px-5 rounded-lg font-semibold transition duration-200 \".concat(viewMode==='daily'?'bg-purple-700 text-white shadow-md':'bg-gray-200 text-gray-700 hover:bg-gray-300'),children:\"Dia\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setViewMode('weekly');setDisplayDate(new Date());// Redefine para a semana atual\n},className:\"py-2 px-5 rounded-lg font-semibold transition duration-200 \".concat(viewMode==='weekly'?'bg-purple-700 text-white shadow-md':'bg-gray-200 text-gray-700 hover:bg-gray-300'),children:\"Semana\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setViewMode('monthly');setDisplayMonth(new Date().getMonth());// Redefine para o mês atual\nsetDisplayYear(new Date().getFullYear());// Redefine para o ano atual\n},className:\"py-2 px-5 rounded-lg font-semibold transition duration-200 \".concat(viewMode==='monthly'?'bg-purple-700 text-white shadow-md':'bg-gray-200 text-gray-700 hover:bg-gray-300'),children:\"M\\xEAs\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setViewMode('yearly');setDisplayYear(new Date().getFullYear());// Redefine para o ano atual\n},className:\"py-2 px-5 rounded-lg font-semibold transition duration-200 \".concat(viewMode==='yearly'?'bg-purple-700 text-white shadow-md':'bg-gray-200 text-gray-700 hover:bg-gray-300'),children:\"Ano\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8 flex items-center justify-between p-4 bg-purple-100 rounded-lg shadow-inner border border-purple-200\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleNavigate(-1),className:\"p-2 rounded-full bg-purple-300 text-purple-800 hover:bg-purple-400 transition duration-200\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M15 19l-7-7 7-7\"})})}),/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-bold text-purple-800 text-center flex-grow\",children:[\"Vendas de: \",formatDisplayPeriod()]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleNavigate(1),className:\"p-2 rounded-full bg-purple-300 text-purple-800 hover:bg-purple-400 transition duration-200\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M9 5l7 7-7 7\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-purple-100 p-6 rounded-xl shadow-lg border border-purple-300 mb-8\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-semibold text-purple-700 mb-3 flex items-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 mr-2 text-purple-600\",fill:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M11 4a2 2 0 114 0v12a4 4 0 11-8 0V4a2 2 0 114 0v12a4 4 0 11-8 0\"})}),\"Total do Per\\xEDodo\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-4xl font-bold text-purple-900\",children:formatCurrency(currentPeriodTotal)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-xl shadow-lg border border-purple-300 mb-8\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold text-purple-700 mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6 mr-2 text-purple-600\",fill:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M7 12l3-3 3 3 4-4M18 14H5a2 2 0 00-2 2v2a2 2 0 002 2h14a2 2 0 002-2v-2a2 2 0 00-2-2z\"})}),\"An\\xE1lise Visual de Vendas\"]}),chartData.length>0?/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(AreaChart,{data:chartData,margin:{top:30,right:30,left:20,bottom:5},children:[\" \",/*#__PURE__*/_jsx(\"defs\",{children:/*#__PURE__*/_jsxs(\"linearGradient\",{id:\"colorTotal\",x1:\"0\",y1:\"0\",x2:\"0\",y2:\"1\",children:[/*#__PURE__*/_jsx(\"stop\",{offset:\"5%\",stopColor:\"#20B2AA\",stopOpacity:0.8}),\" \",/*#__PURE__*/_jsx(\"stop\",{offset:\"95%\",stopColor:\"#20B2AA\",stopOpacity:0})]})}),/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\",stroke:\"#e0e0e0\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"label\"// Usa 'label' para exibição do eixo X\n,style:{fontSize:'0.75rem'}// Fonte menor para rótulos\n}),/*#__PURE__*/_jsx(YAxis,{tickFormatter:tick=>formatCurrency(tick),style:{fontSize:'0.75rem'}}),/*#__PURE__*/_jsx(Tooltip,{formatter:(value,name)=>\"\".concat(name,\": \").concat(formatCurrency(value))// Formata o valor e mostra o nome da série\n,labelFormatter:(label,payload)=>{var _payload$;// Encontra o ponto de dados correspondente para obter a data/período real\nconst dataPoint=(_payload$=payload[0])===null||_payload$===void 0?void 0:_payload$.payload;if(!dataPoint)return label;switch(viewMode){case'daily':return\"Vendas em \".concat(new Date(dataPoint.key).toLocaleDateString('pt-BR',{weekday:'short',year:'numeric',month:'short',day:'numeric'}));case'weekly':return\"Vendas da \".concat(dataPoint.label,\" de \").concat(new Date(dataPoint.date).getFullYear());case'monthly':// Rótulo da dica de ferramenta ajustado para a visualização mensal para mostrar informações da semana\nconst weekStartDate=getStartOfWeek(new Date(dataPoint.date));// Usa dataPoint.date\nconst weekEndDate=getEndOfWeek(new Date(dataPoint.date));// Usa dataPoint.date\nreturn\"Vendas da \".concat(dataPoint.label,\" (\").concat(weekStartDate.toLocaleDateString('pt-BR'),\" - \").concat(weekEndDate.toLocaleDateString('pt-BR'),\") de \").concat(new Date(displayYear,displayMonth,1).toLocaleDateString('pt-BR',{month:'long',year:'numeric'}));case'yearly':return\"Vendas de \".concat(dataPoint.label,\" de \").concat(dataPoint.key.split('-')[0]);default:return label;}}}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsxs(Area,{type:\"monotone\",dataKey:\"total\"// Vendas reais\n,stroke:\"#20B2AA\"// Traço mais claro para vendas reais\n,fillOpacity:1,fill:\"url(#colorTotal)\",activeDot:{r:8},name:viewMode==='monthly'?'Vendas Semanais no Mês':'Vendas Mensais no Ano'// Nome dinâmico com base no viewMode\n,children:[/*#__PURE__*/_jsx(LabelList,{dataKey:\"total\",content:/*#__PURE__*/_jsx(CustomLabel,{})}),\" \"]})]})}):/*#__PURE__*/_jsx(\"p\",{className:\"text-purple-600 italic text-center\",children:\"Adicione vendas para visualizar o gr\\xE1fico.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-xl shadow-lg border border-purple-300\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold text-purple-700 mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6 mr-2 text-purple-600\",fill:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01\"})}),\"Vendas Detalhadas\"]}),filteredSales.length>0?/*#__PURE__*/_jsx(\"ul\",{className:\"divide-y divide-purple-200\",children:filteredSales.map(sale=>/*#__PURE__*/_jsxs(\"li\",{className:\"py-3 flex justify-between items-center text-purple-800\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg\",children:sale.timestamp?new Date(sale.timestamp.toDate()).toLocaleString('pt-BR'):'Data Indisponível'}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-xl\",children:formatCurrency(sale.amount)}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteSale(sale.id),className:\"ml-4 p-2 rounded-full bg-red-100 text-red-600 hover:bg-red-200 transition duration-200\",title:\"Apagar Venda\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 000-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 011-1h4a1 1 0 110 2H8a1 1 0 01-1-1z\",clipRule:\"evenodd\"})})})]},sale.id))}):/*#__PURE__*/_jsx(\"p\",{className:\"text-purple-600 italic\",children:\"Nenhuma venda registada para este per\\xEDodo.\"})]}),userId&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-center text-gray-500 mt-6\",children:[\"ID do Utilizador: \",userId]}),userId&&/*#__PURE__*/// Botão de Logout visível apenas se o utilizador estiver autenticado\n_jsx(\"div\",{className:\"mt-6 text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleSignOut,className:\"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 active:scale-95\",children:\"Terminar Sess\\xE3o\"})})]})})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","initializeApp","getAuth","onAuthStateChanged","createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","getFirestore","collection","addDoc","query","orderBy","onSnapshot","Timestamp","deleteDoc","doc","AreaChart","Area","XAxis","YAxis","CartesianGrid","Tooltip","Legend","ResponsiveContainer","LabelList","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SmartFix","_ref","message","type","onClose","isVisible","setIsVisible","timeoutRef","current","clearTimeout","setTimeout","bgColorClass","borderColorClass","textColorClass","className","concat","role","children","onClick","xmlns","viewBox","fill","fillRule","d","clipRule","FloatingSaleModal","_ref2","isOpen","onQuickAddSale","loading","showSmartFix","amount","setAmount","inputRef","focus","handleAdd","isNaN","parseFloat","ref","step","placeholder","value","onChange","e","target","onKeyPress","key","disabled","App","db","setDb","userId","setUserId","sales","setSales","newSaleAmount","setNewSaleAmount","setLoading","smartFixMessage","setSmartFixMessage","smartFixType","setSmartFixType","viewMode","setViewMode","displayDate","setDisplayDate","Date","displayMonth","setDisplayMonth","getMonth","displayYear","setDisplayYear","getFullYear","selectedSaleDate","setSelectedSaleDate","toISOString","split","saleInputRef","deferredPrompt","setDeferredPrompt","showInstallMessage","setShowInstallMessage","email","setEmail","password","setPassword","isRegistering","setIsRegistering","authInstance","setAuthInstance","showFloatingSaleModal","setShowFloatingSaleModal","getWeekNumber","UTC","getDate","setUTCDate","getUTCDate","getUTCDay","yearStart","getUTCFullYear","weekNo","Math","ceil","getStartOfWeek","date","day","getDay","diff","getEndOfWeek","msg","arguments","length","undefined","unsubscribeAuthListener","initializeFirebase","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","firestore","firebaseAuth","user","uid","substring","err","console","error","unsubscribeSalesListener","appIdForCollection","salesCollectionRef","q","snapshot","salesData","docs","map","_objectSpread","id","data","handleBeforeInstallPrompt","preventDefault","log","window","addEventListener","removeEventListener","handleInstallClick","prompt","outcome","userChoice","handleEmailSignUp","code","handleEmailSignIn","handleSignOut","handleAddSale","saleDateTime","timestamp","fromDate","handleQuickAddSale","todayDateString","handleDeleteSale","saleId","confirm","saleDocRef","formatCurrency","Intl","NumberFormat","style","currency","format","getFilteredSales","filter","sale","saleDate","toDate","setHours","currentDayString","startOfWeek","endOfWeek","filteredSales","currentPeriodTotal","reduce","sum","getChartData","aggregatedData","forEach","label","toLocaleDateString","month","weekNumber","monthWeekNumber","startOfPeriodWeek","endOfPeriodWeek","monthStart","monthEnd","displayStart","displayEnd","year","total","Object","values","sort","a","b","localeCompare","chartData","CustomLabel","props","x","y","dy","fontSize","textAnchor","fontWeight","handleNavigate","direction","newDate","newMonth","newYear","setDate","formatDisplayPeriod","options","setFullYear","strokeLinecap","strokeLinejoin","strokeWidth","width","height","margin","top","right","left","bottom","x1","y1","x2","y2","offset","stopColor","stopOpacity","strokeDasharray","stroke","dataKey","tickFormatter","tick","formatter","name","labelFormatter","payload","_payload$","dataPoint","weekday","weekStartDate","weekEndDate","fillOpacity","activeDot","r","content","toLocaleString","title"],"sources":["D:/vendas/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { initializeApp } from 'firebase/app';\r\nimport { \r\n  getAuth, \r\n  onAuthStateChanged, \r\n  createUserWithEmailAndPassword, \r\n  signInWithEmailAndPassword,     \r\n  signOut                       \r\n} from 'firebase/auth'; \r\nimport { getFirestore, collection, addDoc, query, orderBy, onSnapshot, Timestamp, deleteDoc, doc } from 'firebase/firestore'; \r\nimport {\r\n  AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, LabelList \r\n} from 'recharts';\r\n\r\n// SmartFix Component for notifications\r\nconst SmartFix = ({ message, type, onClose }) => {\r\n  const [isVisible, setIsVisible] = useState(false);\r\n  const timeoutRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (message) {\r\n      setIsVisible(true);\r\n      if (timeoutRef.current) {\r\n        clearTimeout(timeoutRef.current);\r\n      }\r\n      timeoutRef.current = setTimeout(() => {\r\n        setIsVisible(false);\r\n        onClose(); \r\n      }, 5000); \r\n    } else {\r\n      setIsVisible(false);\r\n    }\r\n\r\n    return () => {\r\n      if (timeoutRef.current) {\r\n        clearTimeout(timeoutRef.current);\r\n      }\r\n    };\r\n  }, [message, onClose]);\r\n\r\n  if (!isVisible || !message) return null;\r\n\r\n  let bgColorClass = '';\r\n  let borderColorClass = '';\r\n  let textColorClass = '';\r\n\r\n  switch (type) {\r\n    case 'info':\r\n      bgColorClass = 'bg-blue-100';\r\n      borderColorClass = 'border-blue-400';\r\n      textColorClass = 'text-blue-700';\r\n      break;\r\n    case 'success':\r\n      bgColorClass = 'bg-green-100';\r\n      borderColorClass = 'border-green-400';\r\n      textColorClass = 'text-green-700';\r\n      break;\r\n    case 'error':\r\n      bgColorClass = 'bg-red-100';\r\n      borderColorClass = 'border-red-400';\r\n      textColorClass = 'text-red-700';\r\n      break;\r\n    case 'warning':\r\n      bgColorClass = 'bg-yellow-100';\r\n      borderColorClass = 'border-yellow-400';\r\n      textColorClass = 'text-yellow-800';\r\n      break;\r\n    default:\r\n      bgColorClass = 'bg-gray-100';\r\n      borderColorClass = 'border-gray-400';\r\n      textColorClass = 'text-gray-700';\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={`fixed top-4 right-4 p-4 rounded-lg shadow-lg flex items-center justify-between z-50 transition-all duration-500 transform ${bgColorClass} ${borderColorClass} ${textColorClass} ${isVisible ? 'translate-x-0 opacity-100' : 'translate-x-full opacity-0'}`}\r\n      role=\"alert\"\r\n    >\r\n      <span className=\"block sm:inline\">{message}</span>\r\n      <button onClick={() => setIsVisible(false)} className=\"ml-4 text-current opacity-75 hover:opacity-100 focus:outline-none\">\r\n        <svg className=\"h-4 w-4\" role=\"button\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n          <path fillRule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\r\n        </svg>\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Componente da Janela Flutuante para Adicionar Venda Rápida\r\nconst FloatingSaleModal = ({ isOpen, onClose, onQuickAddSale, loading, showSmartFix }) => {\r\n  const [amount, setAmount] = useState('');\r\n  const inputRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (isOpen && inputRef.current) {\r\n      inputRef.current.focus();\r\n    }\r\n  }, [isOpen]);\r\n\r\n  const handleAdd = async () => {\r\n    if (amount === '' || isNaN(parseFloat(amount))) {\r\n      showSmartFix('Por favor, insira um valor válido.', 'warning');\r\n      return;\r\n    }\r\n    await onQuickAddSale(parseFloat(amount));\r\n    setAmount(''); // Limpa o campo após adicionar\r\n    onClose(); // Fecha o modal\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-40 p-4\">\r\n      <div className=\"bg-white p-6 rounded-xl shadow-2xl w-full max-w-sm\">\r\n        <h3 className=\"text-2xl font-bold text-purple-700 mb-4 text-center\">Adicionar Venda Rápida</h3>\r\n        <input\r\n          ref={inputRef}\r\n          type=\"number\"\r\n          step=\"0.01\"\r\n          className=\"w-full p-3 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-lg shadow-sm mb-4\"\r\n          placeholder=\"Valor da Venda (hoje)\"\r\n          value={amount}\r\n          onChange={(e) => setAmount(e.target.value)}\r\n          onKeyPress={(e) => {\r\n            if (e.key === 'Enter') {\r\n              handleAdd();\r\n            }\r\n          }}\r\n        />\r\n        <button\r\n          onClick={handleAdd}\r\n          className=\"w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 active:scale-95 flex items-center justify-center text-lg mb-3\"\r\n          disabled={loading}\r\n        >\r\n          {loading ? 'Adicionando...' : 'Adicionar Venda'}\r\n        </button>\r\n        <button\r\n          onClick={onClose}\r\n          className=\"w-full text-gray-600 hover:text-gray-800 font-semibold py-2 px-4 rounded-lg transition duration-200\"\r\n        >\r\n          Fechar\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nfunction App() {\r\n  const [db, setDb] = useState(null);\r\n  const [userId, setUserId] = useState(null);\r\n  const [sales, setSales] = useState([]);\r\n  const [newSaleAmount, setNewSaleAmount] = useState('');\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // SmartFix state\r\n  const [smartFixMessage, setSmartFixMessage] = useState('');\r\n  const [smartFixType, setSmartFixType] = useState('info');\r\n\r\n  // New state variables for navigation and adding past sales\r\n  const [viewMode, setViewMode] = useState('daily'); \r\n  const [displayDate, setDisplayDate] = useState(new Date()); \r\n  const [displayMonth, setDisplayMonth] = useState(new Date().getMonth()); \r\n  const [displayYear, setDisplayYear] = useState(new Date().getFullYear()); \r\n\r\n  const [selectedSaleDate, setSelectedSaleDate] = useState(new Date().toISOString().split('T')[0]);\r\n\r\n  const saleInputRef = useRef(null);\r\n\r\n  // PWA related state for \"Add to Home Screen\" prompt\r\n  const [deferredPrompt, setDeferredPrompt] = useState(null);\r\n  const [showInstallMessage, setShowInstallMessage] = useState(false);\r\n\r\n  // Auth states for email/password\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [isRegistering, setIsRegistering] = useState(false); \r\n  const [authInstance, setAuthInstance] = useState(null); \r\n\r\n  // Estado para controlar a visibilidade da janela flutuante\r\n  const [showFloatingSaleModal, setShowFloatingSaleModal] = useState(false);\r\n\r\n  // Helper function to get the week number (ISO week date standard)\r\n  function getWeekNumber(d) {\r\n    d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));\r\n    d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay() || 7)); \r\n    const yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\r\n    const weekNo = Math.ceil((((d - yearStart) / 86400000) + 1) / 7);\r\n    return weekNo;\r\n  }\r\n\r\n  // Helper function to get the start of the week (Sunday)\r\n  const getStartOfWeek = (date) => {\r\n    const d = new Date(date);\r\n    const day = d.getDay(); \r\n    const diff = d.getDate() - day; \r\n    return new Date(d.getFullYear(), d.getMonth(), diff, 0, 0, 0, 0);\r\n  };\r\n\r\n  // Helper function to get the end of the week (Saturday)\r\n  const getEndOfWeek = (date) => {\r\n    const d = new Date(date);\r\n    const day = d.getDay(); \r\n    const diff = d.getDate() + (6 - day); \r\n    return new Date(d.getFullYear(), d.getMonth(), diff, 23, 59, 59, 999);\r\n  };\r\n\r\n  // Function to show SmartFix message\r\n  const showSmartFix = (msg, type = 'info') => {\r\n    setSmartFixMessage(msg);\r\n    setSmartFixType(type);\r\n  };\r\n\r\n  // Initialize Firebase and set up authentication\r\n  useEffect(() => {\r\n    let unsubscribeAuthListener = () => {}; \r\n\r\n    const initializeFirebase = async () => {\r\n      try {\r\n        const firebaseConfig = {\r\n          apiKey: \"AIzaSyCYW9S1e3oMczYb96dPpGeEib71wG-mBVQ\",\r\n          authDomain: \"vendas-da-loja.firebaseapp.com\",\r\n          projectId: \"vendas-da-loja\",\r\n          storageBucket: \"vendas-da-loja.firebasestorage.app\",\r\n          messagingSenderId: \"88597692449\",\r\n          appId: \"1:88597692449:web:1ba73a30e0f681ee196360\",\r\n          measurementId: \"G-BWML378TW4\" \r\n        };\r\n\r\n        const app = initializeApp(firebaseConfig);\r\n        const firestore = getFirestore(app);\r\n        const firebaseAuth = getAuth(app);\r\n        setAuthInstance(firebaseAuth); // Armazena a instância de autenticação\r\n\r\n        setDb(firestore);\r\n\r\n        unsubscribeAuthListener = onAuthStateChanged(firebaseAuth, (user) => {\r\n          if (user) {\r\n            setUserId(user.uid);\r\n            // Melhoria: Mostrar email do utilizador se disponível\r\n            showSmartFix(`Bem-vindo, utilizador ${user.email || user.uid.substring(0, 8)}...`, 'info');\r\n            setLoading(false); \r\n          } else {\r\n            // Quando o utilizador não está logado (após logout ou primeira visita)\r\n            // Não faz login anónimo automático aqui.\r\n            setUserId(null); // Garante que userId é null\r\n            setLoading(false); \r\n            showSmartFix(\"Por favor, faça login ou registe-se para aceder aos seus dados.\", 'info');\r\n          }\r\n        });\r\n      } catch (err) {\r\n        console.error(\"Erro ao inicializar Firebase:\", err);\r\n        showSmartFix(\"Erro ao carregar a aplicação. Verifique a sua configuração do Firebase.\", 'error');\r\n        setLoading(false); \r\n      }\r\n    };\r\n\r\n    initializeFirebase();\r\n\r\n    return () => {\r\n      unsubscribeAuthListener();\r\n    };\r\n  }, []); \r\n\r\n  // Fetch sales data when userId and db are available\r\n  useEffect(() => {\r\n    let unsubscribeSalesListener; // Declare local variable for this useEffect\r\n\r\n    if (db && userId) { // Apenas tenta buscar dados se db e userId estiverem prontos\r\n      setSmartFixMessage(''); \r\n      try {\r\n        const appIdForCollection = 'app-id-vendas'; \r\n\r\n        const salesCollectionRef = collection(db, `artifacts/${appIdForCollection}/users/${userId}/dailySales`);\r\n        const q = query(salesCollectionRef, orderBy('timestamp', 'asc')); \r\n\r\n        unsubscribeSalesListener = onSnapshot(q, (snapshot) => { \r\n          const salesData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n          setSales(salesData);\r\n        }, (err) => {\r\n          console.error(\"Erro ao carregar vendas:\", err);\r\n          showSmartFix(\"Não foi possível carregar as vendas. Tente recarregar a página.\", 'error');\r\n        });\r\n\r\n        return () => {\r\n          if (unsubscribeSalesListener) {\r\n            unsubscribeSalesListener();\r\n          }\r\n        };\r\n      } catch (err) {\r\n        console.error(\"Erro ao configurar listener de vendas:\", err);\r\n        showSmartFix(\"Erro ao aceder dados de vendas.\", 'error');\r\n      }\r\n    } else {\r\n        // Se userId ou db não estiverem prontos, limpa as vendas para evitar mostrar dados antigos\r\n        setSales([]); \r\n    }\r\n    return () => {\r\n      if (unsubscribeSalesListener) {\r\n        unsubscribeSalesListener();\r\n      }\r\n    };\r\n  }, [db, userId]); \r\n\r\n  // PWA: Listen for beforeinstallprompt event\r\n  useEffect(() => {\r\n    const handleBeforeInstallPrompt = (e) => {\r\n      e.preventDefault(); \r\n      setDeferredPrompt(e);\r\n      setShowInstallMessage(true);\r\n      console.log('beforeinstallprompt event fired');\r\n    };\r\n\r\n    window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\r\n\r\n    return () => {\r\n      window.removeEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\r\n    };\r\n  }, []);\r\n\r\n  // PWA: Handle install click\r\n  const handleInstallClick = async () => {\r\n    if (!deferredPrompt) {\r\n      showSmartFix(\"Para instalar a aplicação, use o menu 'Partilhar' do seu navegador e selecione 'Adicionar ao Ecrã Principal'.\", 'info');\r\n      return;\r\n    }\r\n\r\n    deferredPrompt.prompt();\r\n\r\n    const { outcome } = await deferredPrompt.userChoice;\r\n    console.log(`Resposta do utilizador ao prompt de instalação: ${outcome}`);\r\n\r\n    setDeferredPrompt(null);\r\n    setShowInstallMessage(false);\r\n\r\n    if (outcome === 'accepted') {\r\n      showSmartFix('Aplicação instalada com sucesso!', 'success');\r\n    } else {\r\n      showSmartFix('Instalação cancelada.', 'info');\r\n    }\r\n  };\r\n\r\n\r\n  // Funções de Autenticação por Email/Password\r\n  const handleEmailSignUp = async () => {\r\n    if (!email || !password) {\r\n      showSmartFix('Por favor, preencha o email e a palavra-passe.', 'warning');\r\n      return;\r\n    }\r\n    // Validação de palavra-passe no lado do cliente\r\n    if (password.length < 6) {\r\n      showSmartFix('A palavra-passe deve ter pelo menos 6 caracteres.', 'warning');\r\n      return;\r\n    }\r\n    if (!authInstance) {\r\n      showSmartFix('Serviço de autenticação não disponível.', 'error');\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      await createUserWithEmailAndPassword(authInstance, email, password);\r\n      showSmartFix('Registo bem-sucedido! Pode agora iniciar sessão.', 'success');\r\n      setEmail('');\r\n      setPassword('');\r\n      setIsRegistering(false); // Volta para o formulário de login\r\n    } catch (error) {\r\n      console.error(\"Erro no registo:\", error);\r\n      // Mensagem de erro mais amigável para palavras-passe fracas\r\n      if (error.code === 'auth/weak-password') {\r\n        showSmartFix('A palavra-passe é muito fraca. Por favor, use uma palavra-passe mais forte (pelo menos 6 caracteres).', 'error');\r\n      } else if (error.code === 'auth/email-already-in-use') {\r\n        showSmartFix('Este email já está em uso. Tente iniciar sessão ou use outro email.', 'warning');\r\n      } else {\r\n        showSmartFix(`Erro no registo: ${error.message}`, 'error');\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleEmailSignIn = async () => {\r\n    if (!email || !password) {\r\n      showSmartFix('Por favor, preencha o email e a palavra-passe.', 'warning');\r\n      return;\r\n    }\r\n    if (!authInstance) {\r\n      showSmartFix('Serviço de autenticação não disponível.', 'error');\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      await signInWithEmailAndPassword(authInstance, email, password);\r\n      showSmartFix('Sessão iniciada com sucesso!', 'success');\r\n      setEmail('');\r\n      setPassword('');\r\n    } catch (error) {\r\n      console.error(\"Erro no login:\", error);\r\n      // Mensagens de erro mais amigáveis para login\r\n      if (error.code === 'auth/invalid-email' || error.code === 'auth/user-not-found') {\r\n        showSmartFix('Email inválido ou utilizador não encontrado.', 'error');\r\n      } else if (error.code === 'auth/wrong-password') {\r\n        showSmartFix('Palavra-passe incorreta.', 'error');\r\n      } else {\r\n        showSmartFix(`Erro no login: ${error.message}`, 'error');\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSignOut = async () => {\r\n    if (!authInstance) return;\r\n    setLoading(true);\r\n    try {\r\n      await signOut(authInstance);\r\n      setUserId(null); // Limpa o userId ao fazer logout\r\n      setSales([]); // Limpa os dados de vendas\r\n      showSmartFix('Sessão terminada com sucesso.', 'info');\r\n    } catch (error) {\r\n      console.error(\"Erro ao terminar sessão:\", error);\r\n      showSmartFix(`Erro ao terminar sessão: ${error.message}`, 'error');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Function to add a new sale (from main form)\r\n  const handleAddSale = async () => {\r\n    if (!userId) { // Verifica se há um usuário autenticado antes de adicionar venda\r\n      showSmartFix('Por favor, inicie sessão para adicionar vendas.', 'warning');\r\n      return;\r\n    }\r\n    if (newSaleAmount === '' || isNaN(parseFloat(newSaleAmount))) {\r\n      showSmartFix('Por favor, insira um valor de venda válido.', 'warning');\r\n      return;\r\n    }\r\n\r\n    if (!db) { \r\n      showSmartFix('Aplicação não pronta. Tente novamente.', 'error');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setSmartFixMessage(''); \r\n    try {\r\n      const amount = parseFloat(newSaleAmount);\r\n      const saleDateTime = new Date(selectedSaleDate + 'T12:00:00'); \r\n      \r\n      const appIdForCollection = 'app-id-vendas'; \r\n\r\n      const salesCollectionRef = collection(db, `artifacts/${appIdForCollection}/users/${userId}/dailySales`);\r\n\r\n      await addDoc(salesCollectionRef, {\r\n        amount: amount,\r\n        timestamp: Timestamp.fromDate(saleDateTime), \r\n        date: selectedSaleDate \r\n      });\r\n      setNewSaleAmount('');\r\n      setDisplayDate(new Date(selectedSaleDate)); \r\n      setDisplayMonth(new Date(selectedSaleDate).getMonth()); \r\n      setDisplayYear(new Date(selectedSaleDate).getFullYear()); \r\n      setViewMode('daily'); \r\n\r\n      setSelectedSaleDate(new Date().toISOString().split('T')[0]); \r\n      showSmartFix('Venda adicionada com sucesso!', 'success');\r\n      if (saleInputRef.current) {\r\n        saleInputRef.current.focus();\r\n      }\r\n    } catch (e) {\r\n      console.error(\"Erro ao adicionar documento: \", e);\r\n      showSmartFix(\"Erro ao adicionar venda. Por favor, tente novamente.\", 'error');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Nova função para adicionar venda rápida (do modal)\r\n  const handleQuickAddSale = async (amount) => {\r\n    if (!userId) {\r\n      showSmartFix('Por favor, inicie sessão para adicionar vendas.', 'warning');\r\n      return;\r\n    }\r\n    if (!db) {\r\n      showSmartFix('Aplicação não pronta. Tente novamente.', 'error');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setSmartFixMessage('');\r\n    try {\r\n      const saleDateTime = new Date(); // Data de hoje\r\n      const todayDateString = saleDateTime.toISOString().split('T')[0];\r\n      \r\n      const appIdForCollection = 'app-id-vendas'; \r\n\r\n      const salesCollectionRef = collection(db, `artifacts/${appIdForCollection}/users/${userId}/dailySales`);\r\n\r\n      await addDoc(salesCollectionRef, {\r\n        amount: amount,\r\n        timestamp: Timestamp.fromDate(saleDateTime), \r\n        date: todayDateString \r\n      });\r\n      showSmartFix('Venda rápida adicionada com sucesso!', 'success');\r\n      // Atualiza a visualização para o dia de hoje se a venda foi para hoje\r\n      setDisplayDate(new Date()); \r\n      setDisplayMonth(new Date().getMonth()); \r\n      setDisplayYear(new Date().getFullYear()); \r\n      setViewMode('daily'); \r\n\r\n    } catch (e) {\r\n      console.error(\"Erro ao adicionar documento rápido: \", e);\r\n      showSmartFix(\"Erro ao adicionar venda rápida. Por favor, tente novamente.\", 'error');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n\r\n  // Função para apagar uma venda\r\n  const handleDeleteSale = async (saleId) => {\r\n    if (!db || !userId) {\r\n      showSmartFix('Aplicação não pronta ou utilizador não autenticado.', 'error');\r\n      return;\r\n    }\r\n    if (!window.confirm('Tem certeza que deseja apagar esta venda?')) { // Confirmação antes de apagar\r\n        return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setSmartFixMessage('');\r\n    try {\r\n        const appIdForCollection = 'app-id-vendas';\r\n        const saleDocRef = doc(db, `artifacts/${appIdForCollection}/users/${userId}/dailySales`, saleId);\r\n        await deleteDoc(saleDocRef);\r\n        showSmartFix('Venda apagada com sucesso!', 'success');\r\n    } catch (e) {\r\n        console.error(\"Erro ao apagar documento: \", e);\r\n        showSmartFix(\"Erro ao apagar venda. Por favor, tente novamente.\", 'error');\r\n    } finally {\r\n        setLoading(false);\r\n    }\r\n  };\r\n\r\n\r\n  // Helper function to format currency\r\n  const formatCurrency = (amount) => {\r\n    return new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(amount);\r\n  };\r\n\r\n  // Filter sales based on view mode and navigation\r\n  const getFilteredSales = () => {\r\n    return sales.filter(sale => {\r\n      const saleDate = sale.timestamp ? new Date(sale.timestamp.toDate()) : new Date(sale.date);\r\n      saleDate.setHours(0, 0, 0, 0); \r\n\r\n      switch (viewMode) {\r\n        case 'daily':\r\n          const currentDayString = new Date(displayDate).toISOString().split('T')[0];\r\n          return sale.date === currentDayString; \r\n        case 'weekly':\r\n          const startOfWeek = getStartOfWeek(displayDate);\r\n          const endOfWeek = getEndOfWeek(displayDate);\r\n          return saleDate >= startOfWeek && saleDate <= endOfWeek;\r\n        case 'monthly':\r\n          return saleDate.getMonth() === displayMonth && saleDate.getFullYear() === displayYear;\r\n        case 'yearly':\r\n          return saleDate.getFullYear() === displayYear;\r\n        default:\r\n          return true;\r\n      }\r\n    });\r\n  };\r\n\r\n  const filteredSales = getFilteredSales();\r\n  const currentPeriodTotal = filteredSales.reduce((sum, sale) => sum + sale.amount, 0);\r\n\r\n  // Prepare data for the chart based on viewMode\r\n  const getChartData = () => {\r\n    const aggregatedData = {};\r\n\r\n    filteredSales.forEach(sale => {\r\n      const saleDate = sale.timestamp ? new Date(sale.timestamp.toDate()) : new Date(sale.date);\r\n      let key; \r\n      let label; \r\n\r\n      switch (viewMode) {\r\n        case 'daily':\r\n          key = sale.date; \r\n          label = new Date(sale.date).toLocaleDateString('pt-BR', { day: '2-digit', month: 'short' });\r\n          break;\r\n        case 'weekly':\r\n          const weekNumber = getWeekNumber(saleDate);\r\n          key = `${saleDate.getFullYear()}-W${weekNumber}`;\r\n          label = `Semana ${weekNumber}`;\r\n          break;\r\n        case 'monthly':\r\n          const monthWeekNumber = getWeekNumber(saleDate);\r\n          const startOfPeriodWeek = getStartOfWeek(saleDate);\r\n          const endOfPeriodWeek = getEndOfWeek(saleDate);\r\n\r\n          const monthStart = new Date(displayYear, displayMonth, 1);\r\n          const monthEnd = new Date(displayYear, displayMonth + 1, 0, 23, 59, 59, 999);\r\n\r\n          let displayStart = startOfPeriodWeek;\r\n          let displayEnd = endOfPeriodWeek;\r\n\r\n          if (startOfPeriodWeek < monthStart) {\r\n              displayStart = monthStart;\r\n          }\r\n          if (endOfPeriodWeek > monthEnd) {\r\n              displayEnd = monthEnd;\r\n          }\r\n\r\n          key = `${saleDate.getFullYear()}-${saleDate.getMonth() + 1}-W${monthWeekNumber}`;\r\n          label = `${displayStart.toLocaleDateString('pt-BR', { day: '2-digit' })} - ${displayEnd.toLocaleDateString('pt-BR', { day: '2-digit' })}`;\r\n          break;\r\n        case 'yearly':\r\n          const month = saleDate.getMonth();\r\n          const year = saleDate.getFullYear();\r\n          key = `${year}-${month}`; \r\n          label = new Date(year, month, 1).toLocaleDateString('pt-BR', { month: 'long' });\r\n          break;\r\n        default:\r\n          key = sale.date;\r\n          label = sale.date;\r\n      }\r\n\r\n      if (aggregatedData[key]) {\r\n        aggregatedData[key].total += sale.amount;\r\n      } else {\r\n        aggregatedData[key] = {\r\n          key: key, \r\n          label: label,\r\n          total: sale.amount,\r\n          date: saleDate \r\n        };\r\n      }\r\n    });\r\n\r\n    const data = Object.values(aggregatedData).sort((a, b) => {\r\n      if (a.date && b.date) {\r\n        return a.date - b.date;\r\n      }\r\n      return a.key.localeCompare(b.key);\r\n    });\r\n\r\n    return data;\r\n  };\r\n\r\n  const chartData = getChartData();\r\n\r\n  // Custom Label component for the AreaChart peaks\r\n  const CustomLabel = (props) => {\r\n    const { x, y, value } = props;\r\n    if (value > 0) {\r\n      return (\r\n        <text x={x} y={y} dy={-8} fill=\"#20B2AA\" fontSize={12} textAnchor=\"middle\" fontWeight=\"bold\">\r\n          {formatCurrency(value)}\r\n        </text>\r\n      );\r\n    }\r\n    return null;\r\n  };\r\n\r\n\r\n  // Handle navigation for different periods\r\n  const handleNavigate = (direction) => {\r\n    let newDate = new Date(displayDate);\r\n    let newMonth = displayMonth;\r\n    let newYear = displayYear;\r\n\r\n    switch (viewMode) {\r\n      case 'daily':\r\n        newDate.setDate(displayDate.getDate() + direction);\r\n        setDisplayDate(newDate);\r\n        break;\r\n      case 'weekly':\r\n        newDate.setDate(displayDate.getDate() + (direction * 7)); \r\n        setDisplayDate(newDate);\r\n        break;\r\n      case 'monthly':\r\n        newMonth += direction;\r\n        if (newMonth > 11) {\r\n          newMonth = 0;\r\n          newYear++;\r\n        } else if (newMonth < 0) {\r\n          newMonth = 11;\r\n          newYear--;\r\n        }\r\n        setDisplayMonth(newMonth);\r\n        setDisplayYear(newYear);\r\n        setDisplayDate(new Date(newYear, newMonth, 1));\r\n        break;\r\n      case 'yearly':\r\n        newYear += direction;\r\n        setDisplayYear(newYear);\r\n        setDisplayDate(new Date(newYear, 0, 1));\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  // Format the period string for display\r\n  const formatDisplayPeriod = () => {\r\n    const options = { year: 'numeric', month: 'long', day: 'numeric' };\r\n    const date = new Date(displayDate); \r\n    date.setFullYear(displayYear, displayMonth, 1); \r\n\r\n    switch (viewMode) {\r\n      case 'daily':\r\n        return `Dia: ${new Date(displayDate).toLocaleDateString('pt-BR', options)}`;\r\n      case 'weekly':\r\n        const startOfWeek = getStartOfWeek(displayDate).toLocaleDateString('pt-BR');\r\n        const endOfWeek = getEndOfWeek(displayDate).toLocaleDateString('pt-BR');\r\n        return `Semana: ${startOfWeek} - ${endOfWeek} (Semana ${getWeekNumber(displayDate)})`;\r\n      case 'monthly':\r\n        return `Mês: ${new Date(displayYear, displayMonth, 1).toLocaleDateString('pt-BR', { year: 'numeric', month: 'long' })}`;\r\n      case 'yearly':\r\n        return `Ano: ${displayYear}`;\r\n      default:\r\n        return '';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center p-4 font-sans text-gray-800\">\r\n      <SmartFix message={smartFixMessage} type={smartFixType} onClose={() => setSmartFixMessage('')} />\r\n\r\n      {/* Janela Flutuante para Adicionar Venda Rápida */}\r\n      <FloatingSaleModal \r\n        isOpen={showFloatingSaleModal}\r\n        onClose={() => setShowFloatingSaleModal(false)}\r\n        onQuickAddSale={handleQuickAddSale}\r\n        loading={loading}\r\n        showSmartFix={showSmartFix}\r\n      />\r\n\r\n      <div className=\"bg-white p-8 rounded-xl shadow-2xl w-full max-w-4xl backdrop-filter backdrop-blur-sm bg-opacity-90 border border-purple-300\">\r\n        <h1 className=\"text-4xl font-extrabold text-center text-purple-800 mb-8 tracking-tight\">\r\n          💸 Minhas Vendas 💸\r\n        </h1>\r\n\r\n        {loading ? (\r\n          <div className=\"flex justify-center items-center h-32\">\r\n            <div className=\"animate-spin rounded-full h-16 w-16 border-b-4 border-purple-500\"></div>\r\n            <p className=\"ml-4 text-purple-700 text-lg\">A carregar dados...</p>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            {/* Formulário de Login/Registo */}\r\n            {!userId ? (\r\n              <div className=\"mb-8 p-6 bg-purple-50 rounded-lg shadow-inner border border-purple-200\">\r\n                <h2 className=\"text-2xl font-bold text-purple-700 mb-4 text-center\">\r\n                  {isRegistering ? 'Registar' : 'Iniciar Sessão'}\r\n                </h2>\r\n                <div className=\"flex flex-col gap-4 mb-4\">\r\n                  <input\r\n                    type=\"email\"\r\n                    className=\"p-3 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-lg shadow-sm\"\r\n                    placeholder=\"Email\"\r\n                    value={email}\r\n                    onChange={(e) => setEmail(e.target.value)}\r\n                  />\r\n                  <input\r\n                    type=\"password\"\r\n                    className=\"p-3 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-lg shadow-sm\"\r\n                    placeholder=\"Palavra-passe\"\r\n                    value={password}\r\n                    onChange={(e) => setPassword(e.target.value)}\r\n                  />\r\n                </div>\r\n                <button\r\n                  onClick={isRegistering ? handleEmailSignUp : handleEmailSignIn}\r\n                  className=\"w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 active:scale-95 flex items-center justify-center text-lg mb-4\"\r\n                >\r\n                  {isRegistering ? 'Registar' : 'Iniciar Sessão'}\r\n                </button>\r\n                <button\r\n                  onClick={() => setIsRegistering(!isRegistering)}\r\n                  className=\"w-full text-purple-600 hover:text-purple-800 font-semibold py-2 px-4 rounded-lg transition duration-200\"\r\n                >\r\n                  {isRegistering ? 'Já tem conta? Inicie sessão' : 'Não tem conta? Registe-se'}\r\n                </button>\r\n                <p className=\"text-center text-sm text-gray-500 mt-4\">\r\n                  O seu ID de Utilizador atual (anónimo): {userId || 'A carregar...'}\r\n                </p>\r\n              </div>\r\n            ) : (\r\n              <>\r\n                {showInstallMessage && (\r\n                  <div className=\"bg-yellow-100 border border-yellow-400 text-yellow-800 px-4 py-3 rounded relative mb-4 flex items-center justify-between\" role=\"alert\">\r\n                    <span>Quer instalar esta aplicação para acesso rápido?</span>\r\n                    <button\r\n                      onClick={handleInstallClick}\r\n                      className=\"ml-4 bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 active:scale-95\"\r\n                    >\r\n                      Instalar Aplicação\r\n                    </button>\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"mb-8 p-6 bg-purple-50 rounded-lg shadow-inner border border-purple-200\">\r\n                  <h2 className=\"text-2xl font-bold text-purple-700 mb-4 flex items-center\">\r\n                    <svg className=\"w-6 h-6 mr-2 text-purple-600\" fill=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.592 1M12 8V7m0 1v8m0 4v1m-6-10H4m4-2H6m7 0h4m-4 2h2M6 20H4m2-2h2m0-6h2m-2 4h2m-2-6h-2m2 0H8m6 0h2m-2 2h2m-2 0H8\"></path></svg>\r\n                    Registar Nova Venda\r\n                  </h2>\r\n                  <div className=\"flex flex-col sm:flex-row gap-4 mb-4\">\r\n                    <input\r\n                      ref={saleInputRef}\r\n                      type=\"number\"\r\n                      step=\"0.01\"\r\n                      className=\"flex-grow p-3 border border-purple-300 rounded-lg focus:ring-2 focus:ring-500 focus:border-transparent text-lg shadow-sm\"\r\n                      placeholder=\"Ex: 50.75\"\r\n                      value={newSaleAmount}\r\n                      onChange={(e) => setNewSaleAmount(e.target.value)}\r\n                      onKeyPress={(e) => {\r\n                        if (e.key === 'Enter') {\r\n                          handleAddSale();\r\n                        }\r\n                      }}\r\n                    />\r\n                    <input\r\n                        type=\"date\"\r\n                        className=\"p-3 border border-purple-300 rounded-lg focus:ring-2 focus:ring-500 focus:border-transparent text-lg shadow-sm\"\r\n                        value={selectedSaleDate}\r\n                        onChange={(e) => setSelectedSaleDate(e.target.value)}\r\n                    />\r\n                  </div>\r\n                  <button\r\n                    onClick={handleAddSale}\r\n                    className=\"w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 active:scale-95 flex items-center justify-center text-lg\"\r\n                  >\r\n                    <svg className=\"w-5 h-5 mr-2\" fill=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z\"></path></svg>\r\n                    Adicionar Venda\r\n                  </button>\r\n                </div>\r\n\r\n                {/* Botão para abrir a janela flutuante */}\r\n                {userId && ( // Só mostra o botão se o utilizador estiver logado\r\n                  <div className=\"mb-8 text-center\">\r\n                    <button\r\n                      onClick={() => setShowFloatingSaleModal(true)}\r\n                      className=\"bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 active:scale-95 flex items-center justify-center text-lg mx-auto\"\r\n                    >\r\n                      <svg className=\"w-6 h-6 mr-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z\" clipRule=\"evenodd\"></path></svg>\r\n                      Adicionar Venda Rápida\r\n                    </button>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Seletor de Modo de Visualização */}\r\n                <div className=\"mb-6 flex justify-center space-x-4\">\r\n                  <button\r\n                    onClick={() => {\r\n                      setViewMode('daily');\r\n                      setDisplayDate(new Date()); // Redefine para hoje\r\n                    }}\r\n                    className={`py-2 px-5 rounded-lg font-semibold transition duration-200 ${viewMode === 'daily' ? 'bg-purple-700 text-white shadow-md' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}`}\r\n                  >\r\n                    Dia\r\n                  </button>\r\n                  <button\r\n                    onClick={() => {\r\n                      setViewMode('weekly');\r\n                      setDisplayDate(new Date()); // Redefine para a semana atual\r\n                    }}\r\n                    className={`py-2 px-5 rounded-lg font-semibold transition duration-200 ${viewMode === 'weekly' ? 'bg-purple-700 text-white shadow-md' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}`}\r\n                  >\r\n                    Semana\r\n                  </button>\r\n                  <button\r\n                    onClick={() => {\r\n                      setViewMode('monthly');\r\n                      setDisplayMonth(new Date().getMonth()); // Redefine para o mês atual\r\n                      setDisplayYear(new Date().getFullYear()); // Redefine para o ano atual\r\n                    }}\r\n                    className={`py-2 px-5 rounded-lg font-semibold transition duration-200 ${viewMode === 'monthly' ? 'bg-purple-700 text-white shadow-md' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}`}\r\n                  >\r\n                    Mês\r\n                  </button>\r\n                  <button\r\n                    onClick={() => {\r\n                      setViewMode('yearly');\r\n                      setDisplayYear(new Date().getFullYear()); // Redefine para o ano atual\r\n                    }}\r\n                    className={`py-2 px-5 rounded-lg font-semibold transition duration-200 ${viewMode === 'yearly' ? 'bg-purple-700 text-white shadow-md' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}`}\r\n                  >\r\n                    Ano\r\n                  </button>\r\n                </div>\r\n\r\n                {/* Navegação por períodos */}\r\n                <div className=\"mb-8 flex items-center justify-between p-4 bg-purple-100 rounded-lg shadow-inner border border-purple-200\">\r\n                  <button\r\n                    onClick={() => handleNavigate(-1)}\r\n                    className=\"p-2 rounded-full bg-purple-300 text-purple-800 hover:bg-purple-400 transition duration-200\"\r\n                  >\r\n                    <svg className=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15 19l-7-7 7-7\"></path></svg>\r\n                  </button>\r\n                  <h2 className=\"text-xl font-bold text-purple-800 text-center flex-grow\">\r\n                    Vendas de: {formatDisplayPeriod()}\r\n                  </h2>\r\n                  <button\r\n                    onClick={() => handleNavigate(1)}\r\n                    className=\"p-2 rounded-full bg-purple-300 text-purple-800 hover:bg-purple-400 transition duration-200\"\r\n                  >\r\n                    <svg className=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 5l7 7-7 7\"></path></svg>\r\n                  </button>\r\n                </div>\r\n\r\n                <div className=\"bg-purple-100 p-6 rounded-xl shadow-lg border border-purple-300 mb-8\">\r\n                  <h2 className=\"text-xl font-semibold text-purple-700 mb-3 flex items-center\">\r\n                    <svg className=\"w-5 h-5 mr-2 text-purple-600\" fill=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M11 4a2 2 0 114 0v12a4 4 0 11-8 0V4a2 2 0 114 0v12a4 4 0 11-8 0\"></path></svg>\r\n                    Total do Período\r\n                  </h2>\r\n                  <p className=\"text-4xl font-bold text-purple-900\">\r\n                    {formatCurrency(currentPeriodTotal)}\r\n                  </p>\r\n                </div>\r\n\r\n                {/* Gráfico de Vendas (Gráfico de Área) */}\r\n                <div className=\"bg-white p-6 rounded-xl shadow-lg border border-purple-300 mb-8\">\r\n                    <h2 className=\"text-2xl font-bold text-purple-700 mb-4 flex items-center\">\r\n                        <svg className=\"w-6 h-6 mr-2 text-purple-600\" fill=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M7 12l3-3 3 3 4-4M18 14H5a2 2 0 00-2 2v2a2 2 0 002 2h14a2 2 0 002-2v-2a2 2 0 00-2-2z\"></path></svg>\r\n                        Análise Visual de Vendas\r\n                    </h2>\r\n                    {chartData.length > 0 ? (\r\n                        <ResponsiveContainer width=\"100%\" height={300}>\r\n                            <AreaChart data={chartData} margin={{ top: 30, right: 30, left: 20, bottom: 5 }}> {/* Margem superior aumentada */}\r\n                                <defs>\r\n                                    {/* Gradiente para vendas reais */}\r\n                                    <linearGradient id=\"colorTotal\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                                        <stop offset=\"5%\" stopColor=\"#20B2AA\" stopOpacity={0.8}/> {/* Azul-petróleo claro */}\r\n                                        <stop offset=\"95%\" stopColor=\"#20B2AA\" stopOpacity={0}/>\r\n                                    </linearGradient>\r\n                                </defs>\r\n                                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e0e0e0\"/>\r\n                                <XAxis\r\n                                    dataKey=\"label\" // Usa 'label' para exibição do eixo X\r\n                                    style={{ fontSize: '0.75rem' }} // Fonte menor para rótulos\r\n                                />\r\n                                <YAxis tickFormatter={(tick) => formatCurrency(tick)} style={{ fontSize: '0.75rem' }}/>\r\n                                <Tooltip\r\n                                    formatter={(value, name) => `${name}: ${formatCurrency(value)}`} // Formata o valor e mostra o nome da série\r\n                                    labelFormatter={(label, payload) => {\r\n                                      // Encontra o ponto de dados correspondente para obter a data/período real\r\n                                      const dataPoint = payload[0]?.payload;\r\n                                      if (!dataPoint) return label;\r\n\r\n                                      switch (viewMode) {\r\n                                        case 'daily':\r\n                                          return `Vendas em ${new Date(dataPoint.key).toLocaleDateString('pt-BR', { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric' })}`;\r\n                                        case 'weekly':\r\n                                          return `Vendas da ${dataPoint.label} de ${new Date(dataPoint.date).getFullYear()}`;\r\n                                        case 'monthly':\r\n                                          // Rótulo da dica de ferramenta ajustado para a visualização mensal para mostrar informações da semana\r\n                                          const weekStartDate = getStartOfWeek(new Date(dataPoint.date)); // Usa dataPoint.date\r\n                                          const weekEndDate = getEndOfWeek(new Date(dataPoint.date)); // Usa dataPoint.date\r\n                                          return `Vendas da ${dataPoint.label} (${weekStartDate.toLocaleDateString('pt-BR')} - ${weekEndDate.toLocaleDateString('pt-BR')}) de ${new Date(displayYear, displayMonth, 1).toLocaleDateString('pt-BR', { month: 'long', year: 'numeric' })}`;\r\n                                        case 'yearly':\r\n                                          return `Vendas de ${dataPoint.label} de ${dataPoint.key.split('-')[0]}`;\r\n                                        default:\r\n                                          return label;\r\n                                      }\r\n                                    }}\r\n                                />\r\n                                <Legend />\r\n                                <Area\r\n                                  type=\"monotone\"\r\n                                  dataKey=\"total\" // Vendas reais\r\n                                  stroke=\"#20B2AA\" // Traço mais claro para vendas reais\r\n                                  fillOpacity={1}\r\n                                  fill=\"url(#colorTotal)\"\r\n                                  activeDot={{ r: 8 }}\r\n                                  name={\r\n                                    viewMode === 'monthly' ? 'Vendas Semanais no Mês' : 'Vendas Mensais no Ano' // Nome dinâmico com base no viewMode\r\n                                  }\r\n                                >\r\n                                    <LabelList dataKey=\"total\" content={<CustomLabel />} /> {/* Adiciona o componente LabelList */}\r\n                                </Area>\r\n                            </AreaChart>\r\n                        </ResponsiveContainer>\r\n                    ) : (\r\n                        <p className=\"text-purple-600 italic text-center\">Adicione vendas para visualizar o gráfico.</p>\r\n                    )}\r\n                </div>\r\n\r\n                <div className=\"bg-white p-6 rounded-xl shadow-lg border border-purple-300\">\r\n                  <h2 className=\"text-2xl font-bold text-purple-700 mb-4 flex items-center\">\r\n                    <svg className=\"w-6 h-6 mr-2 text-purple-600\" fill=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01\"></path></svg>\r\n                    Vendas Detalhadas\r\n                  </h2>\r\n                  {filteredSales.length > 0 ? (\r\n                    <ul className=\"divide-y divide-purple-200\">\r\n                      {filteredSales.map(sale => (\r\n                        <li key={sale.id} className=\"py-3 flex justify-between items-center text-purple-800\">\r\n                          <span className=\"text-lg\">\r\n                            {sale.timestamp ? new Date(sale.timestamp.toDate()).toLocaleString('pt-BR') : 'Data Indisponível'}\r\n                          </span>\r\n                          <span className=\"font-semibold text-xl\">{formatCurrency(sale.amount)}</span>\r\n                          <button\r\n                            onClick={() => handleDeleteSale(sale.id)}\r\n                            className=\"ml-4 p-2 rounded-full bg-red-100 text-red-600 hover:bg-red-200 transition duration-200\"\r\n                            title=\"Apagar Venda\"\r\n                          >\r\n                            <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path fillRule=\"evenodd\" d=\"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 000-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 011-1h4a1 1 0 110 2H8a1 1 0 01-1-1z\" clipRule=\"evenodd\"></path></svg>\r\n                          </button>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  ) : (\r\n                    <p className=\"text-purple-600 italic\">Nenhuma venda registada para este período.</p>\r\n                  )}\r\n                </div>\r\n                {userId && (\r\n                  <p className=\"text-xs text-center text-gray-500 mt-6\">\r\n                    ID do Utilizador: {userId}\r\n                  </p>\r\n                )}\r\n                {userId && ( // Botão de Logout visível apenas se o utilizador estiver autenticado\r\n                  <div className=\"mt-6 text-center\">\r\n                    <button\r\n                      onClick={handleSignOut}\r\n                      className=\"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 active:scale-95\"\r\n                    >\r\n                      Terminar Sessão\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </>\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}